<!--
  ~ /*
  ~ * Copyright (C) 2025 Bitsea GmbH
  ~  *
  ~ * Licensed under the Apache License, Version 2.0 (the "License");
  ~ * you may not use this file except in compliance with the License.
  ~ * You may obtain a copy of the License at
  ~ *
  ~ *     https://www.apache.org/licenses/LICENSE-2.0
  ~ *
  ~ * Unless required by applicable law or agreed to in writing, software
  ~ * distributed under the License is distributed on an "AS IS" BASIS,
  ~ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ * See the License for the specific language governing permissions and
  ~ * limitations under the License.
  ~ *
  ~ * SPDX-License-Identifier: Apache-2.0
  ~ * License-Filename: LICENSE
  ~ */
  ~
  -->

<configuration>

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <!-- encoders are assigned the type
             ch.qos.logback.classic.encoder.PatternLayoutEncoder by default -->
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} %-5level %logger{36} -%kvp- %msg%n</pattern>
        </encoder>
    </appender>
    <property resource="application-live.properties" />
    <appender name="DB" class="ch.qos.logback.classic.db.DBAppender">
        <connectionSource class="ch.qos.logback.core.db.DriverManagerConnectionSource">
            <driverClass>org.postgresql.Driver</driverClass>
            <url>${spring.datasource.url}</url>
            <user>${spring.datasource.username}</user>
            <password>${spring.datasource.password}</password>
        </connectionSource>
    </appender>

    <springProfile name="live">
        <root level="error">
            <appender-ref ref="DB" />
        </root>
        <logger name="eu.occtet" level="INFO" additivity="false">
            <appender-ref ref="DB" />
        </logger>
    </springProfile>
    <springProfile name="dev">
        <root level="error">
            <!--appender-ref ref="DB" /-->
            <appender-ref ref="STDOUT" />
        </root>
        <logger name="eu.occtet" level="DEBUG" additivity="false">
            <!--appender-ref ref="DB" /-->
            <appender-ref ref="STDOUT" />
        </logger>
    </springProfile>
    <springProfile name="local">
        <root level="error">
            <!--appender-ref ref="DB" /-->
            <appender-ref ref="STDOUT" />
        </root>
        <logger name="eu.occtet" level="DEBUG" additivity="false">
            <!--appender-ref ref="DB" /-->
            <appender-ref ref="STDOUT" />
        </logger>
    </springProfile>
</configuration>
