<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
  ~ Copyright (C) 2025 Bitsea GmbH
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     https:www.apache.orglicensesLICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  ~
  ~ SPDX-License-Identifier: Apache-2.0
  ~ License-Filename: LICENSE
  -->

<view xmlns="http://jmix.io/schema/flowui/view"
      title="msg://eu.occtet.bocfrontend.view.importer/importTaskListView.title"
      focusComponent="importerDataGrid">
    <data readOnly="true">
        <collection id="importerDc"
                    class="eu.occtet.bocfrontend.entity.ImportTask">
            <loader id="importerDl" readOnly="true">
                <query>
                    <![CDATA[select e from Importer e]]>
                </query>
            </loader>
        </collection>
    </data>
    <facets>
        <dataLoadCoordinator auto="true"/>
        <timer id="refreshTimer" delay="3000" autostart="true" repeating="true"/>
    </facets>
    <actions>
        <action id="lookupSelectAction"
                text="msg:///actions.Select"
                type="lookup_select"/>
        <action id="lookupCancelAction"
                text="msg:///actions.Cancel"
                type="lookup_discard"/>
    </actions>
    <layout spacing="true">
        <label value="msg://ImportDashBoard" css="font-weight: bold; font-size: 150%;"/>
        <vbox width="100%">
            <vbox classNames="import-layout">
                <h5 text="msg://eu.occtet.bocfrontend/importTask.available"/>
                <scroller scrollBarsDirection="BOTH" width="100%">
                    <hbox id="availableImportBox" spacing="true"/>
                </scroller>
            </vbox>

            <vbox>
                <hbox id="buttonsPanel" classNames="buttons-panel">
                    <button id="refreshBtn" action="importerDataGrid.refresh"/>
                    <button text="msg://removeStopped" id="removeStoppedBtn"/>
                </hbox>
                <hbox>
                    <button text="msg://eu.occtet.bocfrontend/ImportTask.feedback" id="showFeedback" enabled="false" themeNames="success"/>
                    <button text="msg://eu.occtet.bocfrontend.entity/Configuration" id="showConfig" enabled="false"/>
                    <button text="msg://stop" id="stopImportBtn" enabled="false" themeNames="error" visible="false"/>
                    <button id="removeBtn" action="importerDataGrid.remove"/>
                    <simplePagination id="pagination" dataLoader="importerDl"/>
                </hbox>
            </vbox>
            <dataGrid classNames="occtet-grid" id="importerDataGrid"
                      width="100%"
                      minHeight="20em"
                      dataContainer="importerDc"
                      columnReorderingAllowed="true"
                      selectionMode="SINGLE"
                      themeNames="row-stripes">
                <actions>
                    <action id="create" type="list_create" visible="false"/>
                    <action id="refresh" type="list_refresh"/>
                    <action id="remove" type="list_remove"/>
                </actions>
                <columns resizable="true" sortable="true">
                    <column property="importName" sortable="true" header="msg://name"/>
                    <column property="status" sortable="true" header="msg://status"/>
                    <column property="lastUpdate" sortable="true" header="msg://lastUpdate"/>
                </columns>
            </dataGrid>
        </vbox>
    </layout>
</view>