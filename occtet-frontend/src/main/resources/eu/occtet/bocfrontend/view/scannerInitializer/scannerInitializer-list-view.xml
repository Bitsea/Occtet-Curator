<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<view xmlns="http://jmix.io/schema/flowui/view"
      title="msg://scannerInitializerListView.title"
      focusComponent="scannerInitializerDataGrid">
    <data readOnly="true">
        <collection id="scannerInitializerDc"
                    class="eu.occtet.bocfrontend.entity.ScannerInitializer">
            <fetchPlan extends="_base">
                <property name="inventoryItem" fetchPlan="_base"/>
            </fetchPlan>
            <loader id="scannerInitializerDl" readOnly="true">
                <query>
                    <![CDATA[select e from ScannerInitializer e]]>
                </query>
            </loader>
        </collection>
    </data>
    <facets>
        <dataLoadCoordinator auto="true"/>
        <timer id="refreshTimer" delay="3000" autostart="true" repeating="true"/>
        <timer id="progressTimer" delay="100" autostart="false" repeating="true"/>
    </facets>
    <actions>
        <action id="lookupSelectAction"
                text="msg:///actions.Select"
                type="lookup_select"/>
        <action id="lookupCancelAction"
                text="msg:///actions.Cancel"
                type="lookup_discard"/>
    </actions>
    <layout expand="scannerInitializerDataGrid" spacing="true">
        <label value="Scanner Dashboard" css="font-weight: bold; font-size: 150%;"/>
        <vbox width="100%">
            <vbox classNames="scanner-layout">
                <h5 text="Available scanners"/>
                <scroller scrollBarsDirection="BOTH" width="100%">
                    <hbox id="availableScannerBox" spacing="true"/>
                </scroller>
            </vbox>
            <vbox classNames="scanner-layout">
                <h5 text="Queue"/>
                <scroller scrollBarsDirection="BOTH" width="100%">
                    <hbox id="runningScannerBox" spacing="true"/>
                </scroller>
            </vbox>
            <hbox width="50%" margin="true">
                <nativeLabel text="stopped" id="stopped" width="100%"/>
                <nativeLabel text="waiting" id="waiting" width="100%"/>
                <nativeLabel text="in_progress" id="inProgress" width="100%"/>
                <nativeLabel text="completed" id="completed" width="100%"/>
            </hbox>
            <vbox>
                <hbox id="buttonsPanel" classNames="buttons-panel">
                    <button id="refreshBtn" action="scannerInitializerDataGrid.refresh"/>
                    <button text="Remove Stopped Scanners" id="removeStoppedBtn"/>
                </hbox>
                <hbox>
                    <button text="Feedback" id="showFeedback" enabled="false" themeNames="success"/>
                    <button text="Config" id="showConfig" enabled="false"/>
                    <button text="Stop" id="stopScannerBtn" enabled="false" themeNames="error" visible="false"/>
                    <button id="removeBtn" action="scannerInitializerDataGrid.remove"/>
                    <simplePagination id="pagination" dataLoader="scannerInitializerDl"/>
                </hbox>
            </vbox>
            <dataGrid id="scannerInitializerDataGrid"
                      width="100%"
                      minHeight="20em"
                      dataContainer="scannerInitializerDc"
                      columnReorderingAllowed="true"
                      selectionMode="SINGLE"
                      themeNames="row-stripes">
                <actions>
                    <action id="create" type="list_create" visible="false"/>
                    <action id="refresh" type="list_refresh"/>
                    <action id="remove" type="list_remove"/>
                </actions>
                <columns resizable="true" sortable="true">
                    <column property="scanner" sortable="true" header="Scanner"/>
                    <column property="inventoryItem.inventoryName" sortable="true" header="Inventory Item"/>
                    <column property="status" sortable="true" header="Status"/>
                    <column property="lastUpdate" sortable="true" header="LastUpdate"/>
                </columns>
            </dataGrid>
        </vbox>
    </layout>
</view>