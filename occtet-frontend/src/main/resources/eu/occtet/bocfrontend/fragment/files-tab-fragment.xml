<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
  ~  Copyright (C) 2025 Bitsea GmbH
  ~
  ~  Licensed under the Apache License, Version 2.0 (the "License");
  ~  you may not use this file except in compliance with the License.
  ~  You may obtain a copy of the License at
  ~
  ~      https:www.apache.orglicensesLICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  ~
  ~  SPDX-License-Identifier: Apache-2.0
  ~  License-Filename: LICENSE
  ~
  ~
  -->

<fragment xmlns="http://jmix.io/schema/flowui/fragment">
    <data>
        <collection id="codeLocationDc" class="eu.occtet.bocfrontend.entity.CodeLocation">
            <fetchPlan extends="_base"/>
            <loader id="codeLocationDl">
                <query>
                    <![CDATA[
                    select c from CodeLocation c where c.inventoryItem=:inventoryItem
                ]]>
                </query>
            </loader>
        </collection>
    </data>
    <content>
        <vbox id="root" width="100%" height="100%" spacing="false" margin="false" padding="false">
            <vbox id="codeLocationViewBox" spacing="true" alignItems="CENTER" width="100%" height="100%"
                  visible="true" margin="false" padding="false">
                <dataGrid dataContainer="codeLocationDc" id="codeLocationDataGrid">
                    <columns>
                        <column property="filePath" sortable="false" editable="true" flexGrow="1" filterable="true"/>
                        <column key="options" header="" sortable="false" autoWidth="true" flexGrow="0"/>
                    </columns>
                </dataGrid>
                <hbox margin="false" padding="false">
                    <dropdownButton id="codeloctionsEditButton" text="edit" icon="lumo:edit"
                                    dropdownIndicatorVisible="false" themeNames="small">
                        <items>
                            <componentItem id="addCodeLocation">
                                <hbox padding="false">
                                    <span text="add new"/>
                                </hbox>
                            </componentItem>
                        </items>
                    </dropdownButton>
                </hbox>
            </vbox>
            <vbox id="codeViewerBox" width="100%" height="100%" visible="false" margin="false" padding="false">
                <fragment class="eu.occtet.bocfrontend.fragment.CodeViewerFragment"
                          id="codeViewer"/>
            </vbox>
            <button id="switchButton" text="switch to code viewer" icon="vaadin:code"
                    themeNames="small primary"/>
        </vbox>
    </content>
</fragment>